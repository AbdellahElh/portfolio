---
import CertificateCard from '@/components/CertificateCard.astro';
import Header from '@/components/Header.astro';
import ProjectCard from '@/components/ProjectCard.astro';
import Layout from '@/layouts/Layout.astro';
import { fetchRepos } from '@/lib/github';

const repos = await fetchRepos();
const FEATURED = ['pwd-manager']; // ensure monorepo is visible near top if present
const featuredRepos = [
  ...repos.filter(r => FEATURED.includes(r.name.toLowerCase())),
  ...repos.filter(r => !FEATURED.includes(r.name.toLowerCase()))
];
---
<Layout>
  <Header />
  <section id="projects" class="mt-4">
    <h2 class="text-2xl font-bold tracking-tight">Projects</h2>
  <p class="mt-1 text-slate-600 dark:text-slate-300">A curated project gallery featuring concise summaries, documented tech stacks, and streamlined navigation. Repositories are auto‑synced from <a class="underline underline-offset-4" href="https://github.com/AbdellahElh" target="_blank" rel="noreferrer">GitHub</a> and enriched with metadata for a complete overview.</p>
    <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {featuredRepos.map(repo => (
        <ProjectCard
          name={repo.name}
          description={repo.description}
          html_url={repo.html_url}
          homepage={repo.homepage}
          language={repo.language}
          topics={repo.topics}
          technologies={repo.technologies}
        />
      ))}
    </div>
  </section>

  <section id="certs" class="mt-16">
    <h2 class="text-2xl font-bold tracking-tight">Certificates</h2>
    <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <CertificateCard
        title="Dive Deeper into GA4 Data and Reports"
        issuer="Google Skillshop (GA4)"
        issuedOn="Nov 26, 2024"
        url="https://skillshop.credential.net/bd7fea2b-e79a-4697-a04b-1e5a8bb164d5?record_view=true"
        filePath="/certificates/ga4.pdf"
      />
    </div>
  </section>

  <section id="about" class="mt-16">
    <h2 class="text-2xl font-bold tracking-tight">About Me</h2>
    <div class="mt-4 grid lg:grid-cols-3 gap-6 items-start">
      <div class="lg:col-span-2">
        <p class="text-slate-700 dark:text-slate-300">
          I’m Abdellah El Halimi, a third-year Applied Computer Science student at HoGent, specializing in Mobile & Enterprise Development. My passion for technology goes beyond the classroom—I constantly work on personal projects, explore new tools, and solve programming challenges to sharpen my skills.
        </p>
        <p class="mt-3 text-slate-700 dark:text-slate-300">
          I enjoy building fast, accessible, and user-friendly applications using TypeScript, Java, .NET, and React. Recently, I developed a privacy-centric password manager with facial recognition and a healthcare booking platform, both reflecting my focus on innovation and usability.
        </p>
        <p class="mt-3 text-slate-700 dark:text-slate-300">
          Outside of coding, I’m a polyglot who speaks Dutch, English, Spanish, Catalan, and French, and I thrive in multicultural teams. I’m also disciplined and goal‑oriented—qualities I’ve strengthened through sports and consistent self‑learning. Whether it’s tackling a complex technical problem, contributing to a team project, or picking up a new skill, I approach every challenge with focus and persistence.
        </p>
      </div>
      <aside class="rounded-2xl border border-slate-200/60 dark:border-slate-800 p-4 bg-slate-50/60 dark:bg-slate-900/40">
        <h3 class="text-sm font-semibold text-slate-900 dark:text-white">At a glance</h3>
        <ul class="mt-3 space-y-2 text-sm text-slate-700 dark:text-slate-300">
          <li>• Student: HoGent, Applied CS (Full-Stack Developer)</li>
          <li>• Focus: Full‑stack, security, accessibility</li>
          <li>• Tools: TypeScript, Java, .NET, React</li>
          <li>• Current: Password manager with facial recognition</li>
          <li>• Languages: Dutch, English, French, Spanish, Catalan</li>
        </ul>
        <div class="mt-4 flex gap-2">
          <a
            href="#projects"
            class="inline-flex items-center justify-center h-9 px-3 rounded-xl text-sm font-medium whitespace-nowrap bg-sky-600 text-white hover:bg-sky-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/70"
          >
            View projects
          </a>
          <a
            href="#contact"
            class="inline-flex items-center justify-center h-9 px-3 rounded-xl text-sm font-medium whitespace-nowrap border border-slate-200/60 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400/50"
          >
            Get in touch
          </a>
        </div>
      </aside>
    </div>
  </section>

  <section id="contact" class="mt-16">
    <h2 class="text-2xl font-bold tracking-tight">Contact</h2>
    <div class="mt-4 grid gap-3 text-sm">
      <p>Email: <a class="underline underline-offset-4" href="mailto:e.abdellah.merroun@gmail.com">e.abdellah.merroun@gmail.com</a></p>
      <p>LinkedIn: <a class="underline underline-offset-4" href="https://www.linkedin.com/in/abdellah-el-halimi-375390314/" target="_blank" rel="noreferrer">abdellah-el-halimi-375390314</a></p>
    </div>
  </section>
</Layout>
